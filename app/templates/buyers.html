{% extends 'base.html' %}
{% block content %}
	<h1>Buyers Page</h1>
	<div style="display: inline-flex; justify-content: center; content-align: center; border: 1px solid black; background: #87CEEB; padding: 0px 40px">
		<img src="{{ resp.get('current').get('condition').get('icon') }}">
		<p><b>Hello</b> {{ user.username  }} the weather today at {{ resp.get('location').get('name') }} is {{ resp.get('current').get('condition').get('text') }}</p>
	</div>
	<div>
		<h3>Most recent orders</h3>
		{% if orders %}
		<table class=table>
			<tr>
				<th scope="col">Id</th>
				<th scope="col">Vendor</th>
				<th scope="col">Vendor Contact</th>
				<th scope="col">Vendor County</th>
				<th scope="col">Status</th>
			</tr>
			{% for order in orders %}
			<tr>
				<td scope="row">{{order.id }}</td>
				<td>{{ order.seller.username }}</td>
				<td>{{ order.seller.phone_number }}</td>
				<td>{{ order.seller.county }}</td>
				{% if order.checked %}
				<td>Completed</td>
				{% else %}
				<td>Pending</td>
				{% endif %}
			</tr>
			{% endfor %}
		</table>
		{% else %}
		<p><i>You have no reccent orders</i></p>
		{% endif %}
		<a href="{{ url_for("my_orders") }}">View all orders placed</a>
		<p>Want to place a new order? <a href="{{ url_for("place_order", county=current_user.county) }}">Order Here</a>. You can narrow down your search by entering a filter county below:</p>
		<form action='' method='post'>
		{{ form.hidden_tag() }}
		<p>
			{{ form.county.label }}<br>
			{{ form.county() }}<br>
			{% for error in form.county.errors %}
			<span style="color: red">{{ error }}</span>
			{% endfor %}
		</p>
		<p>{{ form.submit() }}</p>
		</form>
	</div>
{% endblock %}
